<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Thanh toán</title>
    <link rel="stylesheet" href="../css/bootstrap.min.css">
    <link rel="stylesheet" href="../css/bootstrap-icons.min.css">
    <link rel="stylesheet" href="../bootstrap-icons-1.11.3/font/bootstrap-icons.min.css">
    <link rel="stylesheet" href="../css/style.css">
    <script src="../js/jquery-3.4.1.min.js"></script>
    <script src="../js/bootstrap.bundle.min.js"></script>
    <script src="../js/products.js"></script>
</head>

<body>
    <div class="container-fluid">
        <div class="fixed">
            <div class="container-fluid header-content">
                <div class="container">
                    <div style="height: 80px;" class="row d-flex align-items-center justify-content-center">
                        <div class="col-2">
                            <h3 style="color: white; font-style: italic;">Đồng Hồ Đẹp</h3>
                        </div>
                        <div class="col-4">
                            <form action="" class="d-flex">
                                <input placeholder="Tìm kiếm sản phẩm" class="form-control me-2 " type="text">
                                <button style="width: 55px; height: 40px;" class="btn btn-warning ">
                                    <img src="../img/icon/btsearch.png" alt="">
                                </button>
                            </form>

                        </div>
                        <div class="col-2">
                            <div class="navbar navbar-expand">
                                <ul class="navbar-nav">
                                    <li class="nav-item dropdown">
                                        <a href="#" class="nav-link dropdown-toggle text-white me-3" id="dropdownMenuButton" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">Sản phẩm</a>
                                        <div class="dropdown-content_menu " style="width: 200px;">
                                            <a href="../html/giacaonhat.html">Giá cao nhất</a>
                                            <a href="../html/giathapnhat.html">Giá thấp nhất</a>
                                        </div>
                                    </li>
                                    <li class="nav-item dropdown">
                                        <a href="#" class="nav-link dropdown-toggle text-white" id="dropdownMenuButton" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">Hỗ trợ</a>
                                        <div class="dropdown-content_menu" style="width: 210px;">
                                            <a href="../html/chinhsachdoitra.html">Chính sách đổi trả</a>
                                            <a href="../html/chiasekienthuc.html">Chia sẻ kiến thức</a>
                                        </div>
                                    </li>
                                </ul>
                            </div>
                        </div>
                        <div class="col-4 d-flex justify-content-between align-items-center">
                            <div>
                                <span>Hotline : </span>
                                <span>1800 6785</span>
                            </div>
                            <div class="taiKhoan-gioHang">
                                <a href="#"><i style="font-size: 30px !important; color: white;" class="bi bi-person"></i></a>
                                <div class="dropdown-content">
                                    <a href="../html/dangnhap.html">Đăng nhập</a><br><br>
                                    <a href="../html/dangky.html">Đăng ký</a>
                                </div>
                            </div>
                            <div class="taiKhoan-gioHang">
                                <a href="../html/thanhtoan.html" id="cart-icon" onclick="clearCartBeforeCheckout()" onmouseover="showCartItems()">
                                    <i style="font-size: 30px !important; color: white;" class="bi bi-cart"></i>
                                    <span style="color: black;" id="cart-item-count" 
                                        class="badge bg-warning rounded-circle">0</span>
                                </a>
                                <div id="cart-items-container" class="cart-items-container"></div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div style="height: 50px;" class="container-fluid header-menu">
                <div class="container">
                    <div class="row">
                        <div class="col-2 p-0">
                            <a style="text-decoration: none; color: black; width: 200px;" href="index.html"
                                class="d-flex align-items-center active">
                                <div style="height: 50px; width: 70px;">
                                    <img src="../img/LOGO/logo4.png" style="border: 1px solid; border-radius: 50%;" alt="" width="100%" height="100%">
                                </div>
                                <span style="margin-left: 4px;">Đồng Hồ Đẹp</span>
                            </a>
                        </div>
                        <div class="col-10 p-0">
                            <div class="navbar navbar-expand">
                                <ul class="navbar-nav menu">
                                    <li class="nav-item"><a href="../html/gioithieu.html" class="nav-link me-4">Giới thiệu</a></li>
                                    <li class="nav-item"><a href="../html/tintuc.html" class="nav-link me-4">Tin tức</a></li>
                                    <li class="nav-item"><a href="../html/khuyenmai.html" class="nav-link me-4">Khuyến mãi hot</a></li>
                                    <li class="nav-item"><a href="../html/lienhe.html" class="nav-link me-4">Liên hệ</a></li>
                                    <li class="nav-item"><a href="../html/sitemap.html" class="nav-link me-4">Site Map</a></li>
                                    <li class="nav-item"><a href="../html/gioithieuthanhvien.html" class="nav-link">Giới thiệu thành viên</a></li>
                                    <li class="nav-item"><a href="../html/danhsachsanpham.html" class="nav-link">Danh sách sản phẩm</a></li>

                                </ul>
                            </div>
                        </div>
                        
                    </div>
                </div>
            </div>

            <div class="container mt-5">
                <h1 style="font-size: 22px; font-weight: 600; color: #b91409; margin: 5px 0 15px 0;">Giỏ hàng</h1>
                <form action="">
                    <table class="table">
                        <thead>
                            <tr>
                                <th>Sản phẩm</th>
                                <th>Giá</th>
                                <th>Số lượng</th>
                                <th>Tạm tính</th>
                            </tr>
                        </thead>
                        <tbody id="cart-items-table-body">
                            <!-- Các sản phẩm trong giỏ hàng sẽ được thêm vào đây -->
                        </tbody>
                        <tr>
                            <td colspan="4">
                                <button id="update-cart-btn"
                                    style="background-color: #b91409; color: #FFF; line-height: 2.4em; min-height: 2.5em; padding: 0 1.2em;">
                                    Cập nhật giỏ hàng
                                </button>
                            </td>
                        </tr>
                    </table>
                </form>
                <div class="row">
                    <div class="col-6">
                        <h2>Cộng giỏ hàng</h2>
                        <h2>Tổng tiền : <span class="total-amount"></span></h2>
                    </div>
                </div>
                <button id="clear-cart-btn" 
                    style="background-color: #b91409; color: #FFF; line-height: 2.4em; min-height: 2.5em; padding: 0 1.2em; margin-left: 5px; margin-top: 5px;">
                    Xóa giỏ hàng
                </button>
            </div>
        </div>
    </div>
    <footer>
        <div style="text-align: center;" class="container mt-5">
            <div class="row">
                <div class="col-md-4 ml-3">
                    <h4>50, Nguyễn Văn Bảo, Gò Vấp, TPHCM</h4>
                    <p>Đại Học Công Nghiệp</p>
                    <p>Số điện thoại: 087.868.2424</p>
                    <p>Email: twatch@gmail.com</p>
                </div>
                <div class="col-md-4 text-center">
                    <h4>Hỗ trợ khách hàng</h4>
                    <p class="text-center">Chính sách đổi trả hàng online</a></li>
                    <p>Chính sách khách hàng thân thiết</a></li>
                    <p>Giao hàng & phí giao hàng</a></li>
                    <p>Hướng dẫn chọn size</a></li>                    
                </div>
                <div class="col-4 text-center ps-5 pt-3">
                    <h4 class="text-start">Theo dõi chúng tôi</h4>
                    <ul class="nav">
                        <li class="text-center me-3"><img src="../img/footer/theodoi1.webp" alt=""></li>
                        <li><img src="../img/footer/theodoi2.webp" alt=""></li>
                    </ul>
                    <h4 class="text-start">Phương thức thanh toán</h4>
                    <ul class="nav">
                        <li class="me-3"><img src="../img/footer/thanhtoan1.webp" alt=""></li>
                        <li class="me-3"><img src="../img/footer/thanhtoan2.webp" alt=""></li>
                        <li><img src="../img/footer/thanhtoan3.webp" alt=""></li>
                    </ul>
                    <h4 class="text-start">Phương thức vận chuyển</h4>
                    <ul class="nav">
                        <li class="me-3"><img src="../img/footer/vanchuyen1.webp" alt=""></li>
                        <li class="me-3"><img src="../img/footer/vanchuyen2.webp" alt=""></li>
                        <li><img src="../img/footer/vanchuyen3.webp" alt=""></li>
                        
                    </ul>
                </div>
            </div>
        </div>
        <div class="text-center mt-3">
            <p>© 2024 Đồng Hồ - Tất cả các quyền được bảo lưu</p>
            <p>Hãy để chúng tôi giúp bạn tìm chiếc đồng hồ phù hợp, khẳng định phong cách của bạn!</p>
        </div>
    </footer>
    <script>
        document.addEventListener('DOMContentLoaded', function () {
            var updateCartBtn = document.getElementById('update-cart-btn');
            var clearCartBtn = document.getElementById('clear-cart-btn');
            var cartItemsTableBody = document.getElementById('cart-items-table-body');
            var totalAmountElement = document.querySelector('.total-amount');
        
            var cart = JSON.parse(localStorage.getItem('cart')) || [];
            displayCartItems(cart, cartItemsTableBody);
            updateTotalAmount(cart, totalAmountElement);
        
            // Sự kiện nút Xóa giỏ hàng
            clearCartBtn.addEventListener('click', function () {
                localStorage.removeItem('cart');
                cartItemsTableBody.innerHTML = '';
                totalAmountElement.textContent = '0';
                alert('Giỏ hàng đã được xóa.');
            });
        
            // Sự kiện nút Cập nhật giỏ hàng
            updateCartBtn.addEventListener('click', function (e) {
                e.preventDefault();
                updateCartQuantities(cart, cartItemsTableBody);
                updateTotalAmount(cart, totalAmountElement);
                localStorage.setItem('cart', JSON.stringify(cart));
                alert('Giỏ hàng đã được cập nhật.');
            });
        });
        
        function displayCartItems(cart, cartItemsTableBody) {
            cartItemsTableBody.innerHTML = '';
            cart.forEach(function (item) {
                var tr = document.createElement('tr');
                tr.innerHTML = `
                    <td>${item.title}</td>
                    <td>${item.price}</td>
                    <td><input type="number" id="quantity-${item.id}" value="${item.quantity}" min="1"></td>
                    <td>${(parseFloat(item.price.replace(/,/g, '')) * item.quantity).toLocaleString()}</td>
                `;
                cartItemsTableBody.appendChild(tr);
            });
        }
        
        function updateCartQuantities(cart, cartItemsTableBody) {
            cart.forEach(function (item) {
                var quantityInput = document.getElementById(`quantity-${item.id}`);
                if (quantityInput) {
                    item.quantity = parseInt(quantityInput.value);
                }
            });
        }
        
        function updateTotalAmount(cart, totalAmountElement) {
            var totalAmount = cart.reduce(function (total, item) {
                return total + parseFloat(item.price.replace(/,/g, '')) * item.quantity;
            }, 0);
            totalAmountElement.textContent = totalAmount.toLocaleString();
        }
        
        
        
        
    </script>
</body>

</html>
